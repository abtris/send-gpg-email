#!/usr/bin/env node
var path = require('path');
var program = require('commander');
var parsePackageJson = require(path.join(__dirname, '../lib/parsePackageJson'));
var version = parsePackageJson(path.join(__dirname, '../package.json'));
var command = require(path.join(__dirname, '../lib/command'));

program.version(version)

program
  .command('send')
  .description("Send email with passwords for Sinopia via MailGun API")
  .option("-i, --input <file>", "Input CSV file with emails and links to GPG keys.")
  .option("-o, --output <file>", "Output htaccess file where can be passwords stored.")
  .option("-s, --subject <subject>", "Email subject")
  .option("-a, --sender <sender>", "Sender email address")
  .action(function(options) {
    if (options.input && options.output) {
      command.send(options);
    } else {
      console.log("Missing input, output parameters");
    }
  })

program.parse(process.argv);
if (!program.args.length) program.help();
